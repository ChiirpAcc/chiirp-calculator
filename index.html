<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CHIIRP Demo – Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* ────────── SLIDE 1 “CARD” LAYOUT ────────── */
  .slide-content.inputs {
    background: rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 2rem;
    max-width: 600px;
    width: 100%;
    box-shadow: 0 8px 24px rgba(0,0,0,0.1); 
    margin: auto;
  }
  .slide-content.inputs h1 {
    margin-bottom: 0.5rem;
    font-size: clamp(2.4rem, 6vw, 4rem);
  }
  .slide-content.inputs h2 {
    margin-bottom: 1.5rem;
    font-size: clamp(1.2rem, 3vw, 1.6rem);
    font-weight: 300;
  }
  .slide-content.inputs .guide {
    margin-top: 1.5rem;
    background: rgba(255,255,255,0.08);
    padding: 1rem;
    border-radius: 8px;
  }
/* ────────── SLIDE 1 – PLAN SELECTOR ONLY ────────── */
.slide-content.inputs .plan-selector {
  grid-column: 1 / -1;
  margin-top: 1.5rem;
  padding: 0.75rem 1rem;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 8px;
  display: flex;
  justify-content: center;
  gap: 2rem;
}

.slide-content.inputs .plan-selector label {
  position: relative;
  padding: 0.5rem 1rem;
  cursor: pointer;
  font-weight: 500;
  color: #fff;
  border-radius: 6px;
  transition: background 0.2s, font-weight 0.2s, text-decoration 0.2s;
}

/* remove the semi-opaque highlight box */
.slide-content.inputs .plan-selector label::before {
  display: none;
}

/* hover tint only */
.slide-content.inputs .plan-selector label:hover {
  background: rgba(255,255,255,0.2);
}

/* checked → bold + underline (no color change) */
.slide-content.inputs .plan-selector input:checked + span {
  font-weight: 700;
  text-decoration: underline;
}



/* ────────── ESTIMATION SLIDE LAYOUT ────────── */

/* ─── 1) Center the card ─── */
.slide {
  display: grid;
  place-items: center;
}

/* ─── 2) Shrink-wrap the outer card ─── */
.slide .slide-content.estimation {
  background: rgba(255,255,255,0.1);
  border-radius: 12px;
  padding: 2rem;
  width: max-content;
  box-shadow: 0 8px 24px rgba(0,0,0,0.1);
  margin: 0;
}

/* ─── 3) Two-column inner grid with generous gutter ─── */
.slide .slide-content.estimation .est-grid {
  display: grid;
  grid-template-columns: 360px 1fr;
  gap: 5rem;           /* ← 2rem keeps them perfectly apart */
  width: max-content;
  margin: 0;
  align-items: stretch; /* equalize card heights */
}

/* ─── 4) Common card styles ─── */
.slide .slide-content.estimation .est-card {
  background: rgba(255,255,255,0.08);
  border-radius: 8px;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
}

/* ─── 5) Left-column “details-table” ─── */
.slide .slide-content.estimation .details-table {
  width: 360px;
  display: flex;
  flex-direction: column;
}
.slide .slide-content.estimation .details-table h1 {
  margin-bottom: 0.5rem;      /* match Follow-Up slide */
}
.slide .slide-content.estimation .details-table .subhead {
  margin-bottom: 1.5rem;      /* space under the subtitle */
}
.slide .slide-content.estimation .details-table table {
  width: 100%;
  border-collapse: collapse;
  color: #fff;
  margin-bottom: 1.5rem;      /* space under the table */
}
.slide .slide-content.estimation .details-table th,
.slide .slide-content.estimation .details-table td {
  padding: 0.6rem 0.8rem;
  border-bottom: 1px solid rgba(255,255,255,0.2);
  text-align: left;
}
.slide .slide-content.estimation .details-table details.calc-formula {
  margin-top: 0;              /* snug under the table */
}
.slide .slide-content.estimation .details-table details.calc-formula summary {
  margin-bottom: 0.5rem;      /* tighten summary spacing */
}

/* ─── 6) Right-column “highlight-table” ─── */
.slide .slide-content.estimation .highlight-table {
  display: flex;
  flex-direction: column;
  text-align: center;
  white-space: nowrap;
}
.slide .slide-content.estimation .highlight-grid {
  display: grid;
  grid-template-rows: 1fr 1fr;
  width: 100%;
  flex: 1 0 auto;            /* grow to fill space, pushing footer down */
}
.slide .slide-content.estimation .highlight-pair {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  gap: 0.5rem;                /* number↔label gap */
}
.slide .slide-content.estimation .highlight-pair p {
  margin: 0;
}
.slide .slide-content.estimation .highlight-number {
  font-size: clamp(4rem, 9vw, 6rem);
  font-weight: 700;
  color: #ffeb3b;
  line-height: 1;
}
.slide .slide-content.estimation .subtext {
  font-size: 1.1rem;
  color: #fff;
}

/* ─── 7) Footer button ─── */
.slide .slide-content.estimation .highlight-footer {
  margin-top: 1.5rem;
  text-align: center;
}

/* ─── 8) Responsive: stack on mobile ─── */
@media (max-width: 640px) {
  .slide .slide-content.estimation .est-grid {
    grid-template-columns: 1fr;
  }
  .slide .slide-content.estimation .est-card {
    margin-bottom: 2rem;
  }
  .slide .slide-content.estimation .highlight-footer button {
    width: 100%;
  }
}



  

  /* ─────────────────────────────────────────────────────────────────────────────
     BODY & ROTATING BACKDROP
  ───────────────────────────────────────────────────────────────────────────── */
  body {
    position: relative;      /* for the pseudo-element */
    overflow: hidden;
    font-family: system-ui, sans-serif;
    min-height: 100vh;
    overflow-x: hidden;      /* no horizontal scroll */
    display: flex;
    justify-content: center;
    align-items: center;
    color: #fff;
  }
  body::before {
    content: "";
    position: fixed;
    top: 50%; left: 50%;
    /* make it exactly big enough so its diagonal ≥ viewport diagonal */
    width:  calc(100vw + 100vh);
    height: calc(100vw + 100vh);
    background: linear-gradient(130deg, #fcb900 0%, #0693e3 100%); /*0693e3                                                                  */
    transform: translate(-50%, -50%) rotate(0deg);
    transform-origin: center center;
    z-index: -1;
    animation: spin-bg 20s linear infinite;
  }
  @keyframes spin-bg {
    to { transform: translate(-50%, -50%) rotate(360deg); }
  }

  /* ─────────────────────────────────────────────────────────────────────────────
     SLIDE WRAPPER
  ───────────────────────────────────────────────────────────────────────────── */
  .slide {
    width: min(94vw, 900px);
    text-align: center;
    padding: 2rem;
  }

  /* ─────────────────────────────────────────────────────────────────────────────
     HEADINGS
  ───────────────────────────────────────────────────────────────────────────── */
  h1 {
    font-size: clamp(2.2rem, 5vw, 3.6rem);
    letter-spacing: 2px;
    text-shadow: 0 2px 6px #0006;
  }
  h2 {
    margin-top: .8rem;
    font-size: clamp(1.1rem, 2.4vw, 1.4rem);
    font-weight: 400;
    letter-spacing: .2rem;
  }

  /* ─────────────────────────────────────────────────────────────────────────────
     INPUT ROW
  ───────────────────────────────────────────────────────────────────────────── */
  .input-row {
    margin-top: 2.3rem;
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }
  .input-row input {
    flex: 1 1 180px;
    padding: .9rem;
    border: none;
    border-radius: 6px;
    text-align: center;
  }

  /* ─────────────────────────────────────────────────────────────────────────────
     BUTTONS
  ───────────────────────────────────────────────────────────────────────────── */
  button {
    margin-top: 2rem;
    padding: .9rem 1.8rem;
    font-size: 1rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    background: #ffb703;
    color: #002844;
    font-weight: 700;
    transition: opacity .25s;
  }
  button:disabled {
    opacity: .4;
    cursor: not-allowed;
  }

  /* ─────────────────────────────────────────────────────────────────────────────
     RESULT ITEMS ANIMATION
  ───────────────────────────────────────────────────────────────────────────── */
  .valItem {
    opacity: 0;
    transform: translateX(-60px);
    transition: transform .6s ease, opacity .6s ease;
  }
  .valItem.show {
    opacity: 1;
    transform: translateX(0);
  }

  /* ─────────────────────────────────────────────────────────────────────────────
     GUIDE PANEL
  ───────────────────────────────────────────────────────────────────────────── */
  .guide {
    margin-top: 2.5rem;
    width: 100%;
    background: rgba(255,255,255,.12);
    border-radius: 10px;
    padding: 1.4rem 1.2rem;
    backdrop-filter: blur(6px);
  }
  .guide h3 {
    font-size: 1.05rem;
    margin-bottom: 1rem;
    letter-spacing: .08rem;
  }
  .guide table {
    width: 100%;
    border-collapse: collapse;
    font-size: .9rem;
  }
  .guide th, .guide td {
    padding: .45rem .55rem;
    text-align: left;
  }
  .guide th {
    border-bottom: 1px solid #ffffff55;
    font-weight: 600;
  }
  .guide td:first-child {
    font-weight: 600;
    white-space: nowrap;
  }

  /* ─────────────────────────────────────────────────────────────────────────────
     HIDE NUMBER-INPUT SPINNERS
  ───────────────────────────────────────────────────────────────────────────── */
  input::-webkit-inner-spin-button,
  input::-webkit-outer-spin-button {
    display: none;
  }

  
</style>


</head>
<body>
<!-- ────────────────  SLIDE 1 – INPUTS ──────────────── -->
<section class="slide" id="slideInputs">
  <div class="slide-content inputs">
    <h1>CHIIRP DEMO</h1>
    <h2>SEE YOUR SAVINGS WITH CHIIRP</h2>

    <div class="input-row">
      <!-- Form submissions -->
      <input id="leads"       type="number" step="1"    placeholder="Monthly form submissions (F)">
      <input id="formWins"    type="number" step="1"    placeholder="Closed-from-forms wins (W₁)">
    
      <!-- Missed calls -->
      <input id="missedCalls" type="number" step="1"    placeholder="Monthly missed calls (M)">
      <input id="missedWins"  type="number" step="1"    placeholder="Closed-from-missed calls wins (W₂)">
    
      <!-- Estimates / quotes -->
      <input id="quotes"      type="number" step="1"    placeholder="Monthly quotes sent (Q)">
      <input id="quoteWins"   type="number" step="1"    placeholder="Closed-from-quotes wins (W₃)">
    
      <!-- Revenue -->
      <input id="avgRev"      type="number" step="0.01" placeholder="Avg revenue per sale ($)">
    </div>

    <!-- Plan selector -->
      <fieldset class="plan-selector">
        <legend>Select your plan</legend>
        <label>
          <input type="radio" name="plan" value="1600">
          <span>Enterprise</span>
        </label>
        <label>
          <input type="radio" name="plan" value="900">
          <span>Growth</span>
        </label>
        <label>
          <input type="radio" name="plan" value="500" checked>
          <span>Lite</span>
        </label>
      </fieldset>


    <button id="calcBtn">Next ➔</button>
  </div>
</section>



 
<!-- ────────────────  SLIDE 2 – ESTIMATION FOLLOW-UP ──────────────── -->
<section class="slide" id="slideEst" style="display:none; opacity:0; transition:opacity .6s">
  <div class="slide-content estimation">
    <div class="est-grid">


      <!-- LEFT CARD: details + formulas -->
      <div class="est-card details-table">
        <h1>Estimate: Follow-Up</h1>
        <p class="subhead">Based on your monthly quotes and wins</p>
        <table>
          <thead>
            <tr><th>Metric</th><th>Value</th></tr>
          </thead>
          <tbody id="estValues">
            <!-- JS injects rows here -->
          </tbody>
        </table>
        <details class="calc-formula">
          <summary>How these numbers are calculated</summary>
          <pre>
Quotes / mo          = Q (total quotes per month)
Chiirp wins (low)    = max(Q × 0.15, W₃)    // flat 10% or current wins, whichever is higher
Chiirp wins (high)   = max(Q × 0.35, W₃)    // flat 20% or current wins, whichever is higher
Incremental wins     = Chiirp wins − W₃
Monthly revenue      = Incremental wins × AR
          </pre>
        </details>
      </div>


      <!-- RIGHT CARD: monthly & annual highlight + button -->
      <div class="est-card highlight-table">
        <h3>Additional Revenue</h3>

        <div class="highlight-grid">
          <div class="highlight-pair">
            <p id="estGainMonthly" class="highlight-number">—</p>
            <p class="subtext">per month</p>
          </div>
          <div class="highlight-pair">
            <p id="estGainAnnual" class="highlight-number">—</p>
            <p class="subtext">per year</p>
          </div>
        </div>

        <!-- Footer container for bottom-aligned button -->
        <div class="highlight-footer">
          <button id="toS2L">Next ➔</button>
        </div>
      </div>

    </div>
  </div>
</section>



<!-- ────────────────  SLIDE 3 – SPEED-TO-LEAD ──────────────── -->
<section class="slide" id="slideS2L" style="display:none; opacity:0; transition:opacity .6s">
  <div class="slide-content estimation">
    <div class="est-grid">

      <!-- LEFT CARD: details + formulas -->
      <div class="est-card details-table">
        <h1>Speed-to-Lead</h1>
        <p class="subhead">Based on your monthly form submissions and wins</p>
        <table>
          <thead>
            <tr><th>Metric</th><th>Value</th></tr>
          </thead>
          <tbody id="s2lValues">
            <!-- Rows will be injected here -->
          </tbody>
        </table>
        <details class="calc-formula">
          <summary>How these numbers are calculated</summary>
          <pre>
Form submissions / mo = F
Chiirp wins (low)     = max(F × 10%, W₁)
Chiirp wins (high)    = max(F × 20%, W₁)
Incremental wins      = Chiirp wins − W₁
Monthly revenue       = Incremental wins × AR
          </pre>
        </details>
      </div>

      <!-- RIGHT CARD: highlight + button -->
      <div class="est-card highlight-table">
        <h3>Additional Revenue</h3>
        <div class="highlight-grid">
          <div class="highlight-pair">
            <p id="s2lGainMonthly" class="highlight-number">—</p>
            <p class="subtext">per month</p>
          </div>
          <div class="highlight-pair">
            <p id="s2lGainAnnual" class="highlight-number">—</p>
            <p class="subtext">per year</p>
          </div>
        </div>
        <div class="highlight-footer">
          <button id="toMissed">Next ➔</button>
        </div>
      </div>

    </div>
  </div>
</section>


<!-- ────────────────  SLIDE 4 – ABANDONED-CALL RECOVERY ──────────────── -->
<section class="slide" id="slideMissed" style="display:none; opacity:0; transition:opacity .6s">
  <div class="slide-content estimation">
    <div class="est-grid">

      <!-- LEFT CARD: details + formulas -->
      <div class="est-card details-table">
        <h1>Abandoned-Call Recovery</h1>
        <p class="subhead">Based on your monthly abandoned calls and wins</p>
        <table>
          <thead>
            <tr><th>Metric</th><th>Value</th></tr>
          </thead>
          <tbody id="missValues">
            <!-- JS injects rows here -->
          </tbody>
        </table>
        <details class="calc-formula">
          <summary>How these numbers are calculated</summary>
          <pre>
Abandoned calls / mo = M
Chiirp wins (low)    = max(M × 20%, W₂)
Chiirp wins (high)   = max(M × 40%, W₂)
Incremental wins     = Chiirp wins − W₂
Monthly revenue      = Incremental wins × AR
          </pre>
        </details>
      </div>

      <!-- RIGHT CARD: highlight + button -->
      <div class="est-card highlight-table">
        <h3>Additional Revenue</h3>
        <div class="highlight-grid">
          <div class="highlight-pair">
            <p id="missGainMonthly" class="highlight-number">—</p>
            <p class="subtext">per month</p>
          </div>
          <div class="highlight-pair">
            <p id="missGainAnnual" class="highlight-number">—</p>
            <p class="subtext">per year</p>
          </div>
        </div>
        <div class="highlight-footer">
          <button id="toSum">Next ➔</button>
        </div>
      </div>

    </div>
  </div>
</section>






<!-- ────────────────  SLIDE 5 – SUMMARY ──────────────── -->
<section class="slide" id="slideSum" style="display:none; opacity:0; transition:opacity .6s">
  <div class="slide-content estimation">
    <div class="est-grid">

      <!-- LEFT CARD: individual ranges -->
      <div class="est-card details-table">
        <h1>Breakdown by Module</h1>
        <table>
          <thead>
            <tr><th>Module</th><th>Monthly Gain</th></tr>
          </thead>
          <tbody id="sumValues">
            <!-- JS injects rows:
              <tr><td>Estimation</td><td>$x – $y</td></tr>
              etc. -->
          </tbody>
        </table>
        <details style="margin-top:1.5rem; font-size:.9rem; text-align:left">
          <summary style="cursor:pointer; font-weight:600">
            How these numbers are calculated
          </summary>
          <pre style="white-space:pre-wrap; line-height:1.5; margin-top:.8rem">
Low monthly gain   = Est_Low  + S2L_Low  + Miss_Low
High monthly gain  = Est_High + S2L_High + Miss_High

ROI (low)          = Low monthly gain  ÷ Monthly cost
ROI (high)         = High monthly gain ÷ Monthly cost
          </pre>
        </details>
      </div>

<!-- RIGHT CARD: totals & ROI highlight + footer -->
<div class="est-card highlight-table">
  <h3>Total Additional Revenue</h3>

  <!-- monthly & annual in a grid -->
  <div class="highlight-grid">
   <div class="highlight-pair">
      <p id="sumGainMonthly" class="highlight-number">—</p>
      <p class="subtext">per month</p>
    </div>
    <div class="highlight-pair">
      <p id="sumGainAnnual" class="highlight-number">—</p>
      <p class="subtext">per year</p>
    </div>
    <!-- NEW: ROI big and yellow -->
    <div class="highlight-pair">
      <p id="sumROI" class="highlight-number">—×</p>
      <p class="subtext">ROI</p>
    </div>
  </div>

  <!-- footer: just the restart button -->
  <div class="highlight-footer">
    <button onclick="location.reload()">Restart ↻</button>
  </div>
</div>


<script>

  (() => {
  // ── CONSTANTS ─────────────────────────────────────────
  const UPLIFT = {
    estLow:   1.5, estHigh:  2.0,
    s2lLow:   2.0, s2lHigh:  5.0,
    missLow:  3.0, missHigh: 5.0
  };

  // ── MODULE REVENUE STORAGE ─────────────────────────────
  let revLowEst   = 0, revHighEst   = 0;
  let revLowS2L   = 0, revHighS2L   = 0;
  let revLowMiss  = 0, revHighMiss  = 0;

  // ── DOM SHORTCUTS & INPUTS ─────────────────────────────
  const g = id => document.getElementById(id);

  // helper to read the currently selected plan cost
  function getMonthlyCost() {
    return +document.querySelector('input[name="plan"]:checked').value;
  }

  const inputs = [
    'leads','formWins','missedCalls','missedWins',
    'quotes','quoteWins','avgRev'
  ].map(g);

  // enable “Next” button once all fields are non-empty
  const calcBtn = g('calcBtn');
  inputs.forEach(i =>
    i.addEventListener('input', () =>
      calcBtn.disabled = inputs.some(e => !e.value.trim())
    )
  );

  // ── MAIN CALCULATION ────────────────────────────────────
  calcBtn.addEventListener('click', () => {
    // parse client inputs
    const F  = +g('leads').value;       // total form submissions
    const W1 = +g('formWins').value;    // current form wins
    const M  = +g('missedCalls').value; // abandoned calls
    const W2 = +g('missedWins').value;  // wins from abandoned calls
    const Q  = +g('quotes').value;      // quotes sent
    const W3 = +g('quoteWins').value;   // wins from quotes
    const AR = +g('avgRev').value;      // avg revenue per sale

    
// ──── 1. ESTIMATION FOLLOW-UP (10% / 20% flat conversion with floor) ────────────
{
  // 1) Parse inputs
  const Q   = +g('quotes').value;     // total quotes per month
  const W3  = +g('quoteWins').value;  // current quote wins
  const AR  = +g('avgRev').value;     // avg revenue per win

  // 2) Fixed conversion rates
  const RATE_LOW  = 0.10;  // 10%
  const RATE_HIGH = 0.20;  // 20%

  // 3) Baseline win-rate
  const baseRate = Q > 0 ? W3 / Q : 0;

  // 4) Raw projected wins
  const rawLowWins  = Q * RATE_LOW;
  const rawHighWins = Q * RATE_HIGH;

  // 5) Floor projections at current wins
  const winsLow  = Math.max(rawLowWins,  W3);
  const winsHigh = Math.max(rawHighWins, W3);

  // 6) Net-new wins
  const deltaLow  = winsLow  - W3;
  const deltaHigh = winsHigh - W3;

  // 7) Revenue uplift
  revLowEst  = deltaLow  * AR;
  revHighEst = deltaHigh * AR;

  // 8) Inject table rows
  g('estValues').innerHTML = [
    ['Quotes / mo',       Q],
    ['Chiirp wins (low)',  winsLow.toFixed(1)],
    ['Chiirp wins (high)', winsHigh.toFixed(1)],
    ['Monthly gain',
      `$${Math.round(revLowEst).toLocaleString()} – $${Math.round(revHighEst).toLocaleString()}`]
  ]
  .map(([label, val]) => `<tr><td>${label}</td><td>${val}</td></tr>`)
  .join('');

  // 9) Update highlights
  g('estGainMonthly').textContent =
    `$${Math.round(revLowEst).toLocaleString()} – $${Math.round(revHighEst).toLocaleString()}`;
  g('estGainAnnual').textContent =
    `$${Math.round(revLowEst*12).toLocaleString()} – $${Math.round(revHighEst*12).toLocaleString()}`;

  // 10) Reveal the slide
  revealSlide('slideEst');
}



    
/* ──── 2. FORM SUBMISSIONS (Speed-to-Lead, 10% / 20% flat conversion) ──── */
g('toS2L').onclick = () => {
  // Inputs
  const F   = +g('leads').value;     // total form submissions / month
  const W1  = +g('formWins').value;  // current form wins
  const AR  = +g('avgRev').value;    // avg revenue per win

  // Fixed conversion rates
  const RATE_LOW  = 0.15;  // 10%
  const RATE_HIGH = 0.35;  // 20%

  // Raw projected wins
  const rawLowWins  = F * RATE_LOW;
  const rawHighWins = F * RATE_HIGH;

  // Floor at current wins
  const winsLow  = Math.max(rawLowWins,  W1);
  const winsHigh = Math.max(rawHighWins, W1);

  // Net-new deals
  const deltaLow  = winsLow  - W1;
  const deltaHigh = winsHigh - W1;

  // Revenue uplift
  revLowS2L  = deltaLow  * AR;
  revHighS2L = deltaHigh * AR;

  // Render the table
  g('s2lValues').innerHTML = [
    ['Form submissions / mo',        F],
    ['With Chiirp (low)',            winsLow.toFixed(1)],
    ['With Chiirp (high)',           winsHigh.toFixed(1)],
    ['Monthly gain',
      `$${Math.round(revLowS2L).toLocaleString()} – $${Math.round(revHighS2L).toLocaleString()}`]
  ]
  .map(([label,val]) => `<tr><td>${label}</td><td>${val}</td></tr>`)
  .join('');

  // Update the highlights
  g('s2lGainMonthly').textContent =
    `$${Math.round(revLowS2L).toLocaleString()} – $${Math.round(revHighS2L).toLocaleString()}`;
  g('s2lGainAnnual').textContent =
    `$${Math.round(revLowS2L * 12).toLocaleString()} – $${Math.round(revHighS2L * 12).toLocaleString()}`;

  // Reveal the slide
  revealSlide('slideS2L');
};

/* ────────────────  3. ABANDONED-CALL RECOVERY ──────────────── */
g('toMissed').onclick = () => {
  // 1) Parse inputs
  const M  = +g('missedCalls').value;     // total abandoned calls/month
  const W2 = +g('missedWins').value || 0; // current wins from those calls
  const AR = +g('avgRev').value;          // avg revenue per win

  // 2) Flat recovery rates
  const RATE_LOW  = 0.20;  // 20%
  const RATE_HIGH = 0.40;  // 40%

  // 3) Raw projected wins at those rates
  const rawLowWins  = M * RATE_LOW;
  const rawHighWins = M * RATE_HIGH;

  // 4) Floor at current wins
  const winsLow  = Math.max(rawLowWins,  W2);
  const winsHigh = Math.max(rawHighWins, W2);

  // 5) Net-new deals above current
  const deltaLow  = winsLow  - W2;
  const deltaHigh = winsHigh - W2;

  // 6) Revenue uplift
  revLowMiss  = deltaLow  * AR;
  revHighMiss = deltaHigh * AR;

  // 7) Inject table rows
  g('missValues').innerHTML = [
    ['Abandoned calls / mo', M],
    ['With Chiirp (low)',   winsLow.toFixed(1)],
    ['With Chiirp (high)',  winsHigh.toFixed(1)],
    ['Monthly gain',
      `$${Math.round(revLowMiss).toLocaleString()} – $${Math.round(revHighMiss).toLocaleString()}`]
  ]
  .map(([label, val]) => `<tr><td>${label}</td><td>${val}</td></tr>`)
  .join('');

  // 8) Update highlights
  g('missGainMonthly').textContent =
    `$${Math.round(revLowMiss).toLocaleString()} – $${Math.round(revHighMiss).toLocaleString()}`;
  g('missGainAnnual').textContent =
    `$${Math.round(revLowMiss * 12).toLocaleString()} – $${Math.round(revHighMiss * 12).toLocaleString()}`;

  // 9) Show the slide
  revealSlide('slideMissed');
};
  /* ────────────────  SLIDE 4 – SUMMARY ──────────────── */
  g('toSum').onclick = () => {
    // 1) Grab the plan cost from the radio buttons
    const monthlyCost = getMonthlyCost();

    // 2) Aggregate all three revenue streams
    const lowTotal  = revLowEst  + revLowS2L  + revLowMiss;
    const highTotal = revHighEst + revHighS2L + revHighMiss;

    // 3) Compute ROI based on the selected plan cost
    const roiLow  = (lowTotal  / monthlyCost).toFixed(1);
    const roiHigh = (highTotal / monthlyCost).toFixed(1);

    // 4) Populate the left‐hand breakdown table
    g('sumValues').innerHTML = [
      ['Estimation Follow-Up', `$${Math.round(revLowEst).toLocaleString()} – $${Math.round(revHighEst).toLocaleString()}`],
      ['Speed-to-Lead',       `$${Math.round(revLowS2L).toLocaleString()} – $${Math.round(revHighS2L).toLocaleString()}`],
      ['Call Recovery',       `$${Math.round(revLowMiss).toLocaleString()} – $${Math.round(revHighMiss).toLocaleString()}`]
    ].map(([label, val]) =>
      `<tr><td>${label}</td><td>${val}</td></tr>`
    ).join('');

    // 5) Update the big yellow money figures
    g('sumGainMonthly').textContent =
      `$${Math.round(lowTotal).toLocaleString()} – $${Math.round(highTotal).toLocaleString()}`;
    g('sumGainAnnual').textContent  =
      `$${Math.round(lowTotal * 12).toLocaleString()} – $${Math.round(highTotal * 12).toLocaleString()}`;

    // 6) Show the ROI number in yellow (ID matches HTML)
    g('sumROI').textContent =
      `${roiLow}× – ${roiHigh}×`;

    // 7) Reveal the Summary slide
    revealSlide('slideSum');
  };
})();

/* ── helper to fade-in slide and animate items ── */
function revealSlide(id){
  document.querySelectorAll('.slide').forEach(s => s.style.display = 'none');
  const el = g(id);
  el.style.display = 'block';
  requestAnimationFrame(() => el.style.opacity = 1);
  setTimeout(() =>
    el.querySelectorAll('.valItem').forEach((v,i) =>
      setTimeout(() => v.classList.add('show'), 200 + i*250)
    )
  , 400);
}

})();          // ← closes the IIFE
  </script>
</body>
</html>
  
